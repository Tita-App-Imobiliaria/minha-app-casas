<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Inspire Im√≥vel</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/25/25694.png">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #000; --bg: #fdfdfb; --card: #ffffff; }
        body { font-family: 'Georgia', serif; background: var(--bg); margin: 0; padding: 20px; color: #1a1a1a; text-align: center; }
        .container { max-width: 600px; margin: auto; }
        .brand-header { font-style: italic; font-size: 28px; margin: 40px 0; }
        .brand-text { font-size: 24px; line-height: 1.4; margin-bottom: 40px; }
        .brand-text b { font-size: 32px; display: block; margin-top: 10px; font-family: sans-serif; letter-spacing: 4px; font-weight: bold; }
        details { background: var(--card); border: 1px solid #e5e5e0; margin-bottom: 15px; text-align: left; }
        summary { padding: 20px; font-weight: bold; cursor: pointer; list-style: none; display: flex; justify-content: space-between; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; outline: none; }
        summary::after { content: "Ôºã"; color: #999; }
        details[open] summary::after { content: "Ôºç"; }
        .details-content { padding: 0 20px 20px 20px; border-top: 1px solid #f9f9f9; }
        input { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; font-size: 16px; }
        .btn-add { background: #000; color: #fff; width: 100%; padding: 18px; border: none; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; margin-top: 10px; }
        .icon-box { font-size: 50px; padding: 30px; background: #f9f9f7; display: block; text-align: center; margin-bottom: 15px; }
        .btn-wa { background: #000; color: white; text-decoration: none; display: block; text-align: center; padding: 15px; margin-top: 20px; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
        #app-content { display: none; }
        textarea { width: 100%; min-height: 100px; border: 1px solid #ddd; padding: 10px; margin-top: 15px; box-sizing: border-box; font-family: 'Georgia', serif; font-size: 15px; }
    </style>
</head>
<body>
<div class="container">
    <div id="login-screen">
        <h1 class="brand-header">Inspire Im√≥vel</h1>
        <div class="brand-text">New Beginnings<br>New Memories<br>New Dreams<b>NEW HOME</b></div>
        <input type="text" id="access-code" placeholder="C√ìDIGO DE ACESSO">
        <button class="btn-add" onclick="checkLogin()">Entrar</button>
    </div>
    <div id="app-content">
        <h2 style="font-weight:normal; font-style:italic; margin-bottom: 30px;">Portef√≥lio de Sele√ß√£o</h2>
        <details>
            <summary>Adicionar Proposta</summary>
            <div class="details-content">
                <input type="text" id="link-in" placeholder="Link do Im√≥vel">
                <input type="text" id="local-in" placeholder="Localiza√ß√£o">
                <input type="text" id="preco-in" placeholder="Valor">
                <input type="text" id="tipo-in" placeholder="Tipologia">
                <button class="btn-add" onclick="saveToFirebase()">Gravar na Lista</button>
            </div>
        </details>
        <div id="property-list"></div>
        <button onclick="location.reload()" style="background:none; border:none; color:#999; margin-top:50px; cursor:pointer; font-size: 11px;">Terminar Sess√£o</button>
    </div>
</div>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyA18c4ynE28ugvLZqyatw1-l-s2U98UqzE",
        authDomain: "app-imobiliaria-compradores.firebaseapp.com",
        databaseURL: "https://app-imobiliaria-compradores-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "app-imobiliaria-compradores",
        storageBucket: "app-imobiliaria-compradores.firebasestorage.app",
        messagingSenderId: "125952001601",
        appId: "1:125952001601:web:9b3ceb8cadd48ec9d568c0"
    };
    const SEU_TELEM√ìVEL = "351960012080";
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    let currentCode = "";

    function checkLogin() {
        const codeInput = document.getElementById('access-code');
        const code = codeInput.value.trim().toLowerCase();
        if(code !== "") { 
            currentCode = code; 
            document.getElementById('login-screen').style.display = 'none'; 
            document.getElementById('app-content').style.display = 'block'; 
            loadData(); 
        } else {
            alert("Por favor, insira um c√≥digo.");
        }
    }

    function saveToFirebase() {
        const link = document.getElementById('link-in').value;
        if(!link) return alert("Cole o link.");
        database.ref('clientes/' + currentCode).push({
            link: link, 
            local: document.getElementById('local-in').value || "Sob consulta",
            preco: document.getElementById('preco-in').value || "Sob consulta",
            tipo: document.getElementById('tipo-in').value || "N/A", 
            notas: ""
        });
        alert("Adicionado!");
        document.getElementById('link-in').value = "";
        document.getElementById('local-in').value = "";
        document.getElementById('preco-in').value = "";
        document.getElementById('tipo-in').value = "";
    }

    function loadData() {
        database.ref('clientes/' + currentCode).on('value', (snapshot) => {
            const listDiv = document.getElementById('property-list');
            listDiv.innerHTML = "";
            const items = snapshot.val();
            if(!items) return;
            Object.keys(items).reverse().forEach(id => {
                const item = items[id];
                listDiv.innerHTML += `
                <details>
                    <summary>${item.local} ‚Äî ${item.preco}</summary>
                    <div class="details-content">
                        <span class="icon-box">üè†</span>
                        <p><strong>Configura√ß√£o:</strong> ${item.tipo}</p>
                        <a href="${item.link}" target="_blank" style="color: #666; font-size: 13px;">Ver Detalhes Online üîó</a>
                        <textarea onchange="updateNote('${id}', this.value)" placeholder="As suas notas...">${item.notas || ''}</textarea>
                        <a href="https://wa.me/${SEU_TELEM√ìVEL}" target="_blank" class="btn-wa">Enviar Feedback</a>
                    </div>
                </details>`;
            });
        });
    }

    function updateNote(id, note) { 
        database.ref('clientes/' + currentCode + '/' + id).update({ notas: note }); 
    }
</script>
</body>
</html>
